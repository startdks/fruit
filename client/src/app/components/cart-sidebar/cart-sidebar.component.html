<!-- Cart Overlay -->
@if (isOpen) {
<div class="cart-overlay active" (click)="onClose.emit()"></div>
}

<!-- Cart Sidebar -->
<div class="cart-sidebar" [class.active]="isOpen">
  <div class="cart-header">
    <h2>Shopping Cart</h2>
    <button class="cart-close" (click)="onClose.emit()">&times;</button>
  </div>
  <div class="cart-items">
    @if (cart.items.length === 0) {
    <div class="cart-empty">
      <p>Your cart is empty</p>
      <span>üõí</span>
    </div>
    } @else { @for (item of cart.items; track item.id) {
    <div class="cart-item">
      <img class="cart-item-image" [src]="item.productImageUrl" [alt]="item.productName" />
      <div class="cart-item-content">
        <div class="cart-item-info">
          <h4>{{ item.productName }}</h4>
          <p>${{ item.productPrice.toFixed(2) }} / {{ item.productUnit }}</p>
        </div>
        <div class="cart-item-bottom">
          <div class="cart-item-controls">
            <button class="quantity-btn" (click)="updateQuantity(item.id, item.quantity - 1)">
              -
            </button>
            <span class="quantity">{{ item.quantity }}</span>
            <button class="quantity-btn" (click)="updateQuantity(item.id, item.quantity + 1)">
              +
            </button>
          </div>
          <div class="cart-item-total">${{ item.subtotal.toFixed(2) }}</div>
        </div>
      </div>
      <button class="remove-btn" (click)="removeItem(item.id)">üóëÔ∏è</button>
    </div>
    } }
  </div>
  <div class="cart-footer">
    <div class="cart-summary">
      <div class="cart-summary-row">
        <span>Subtotal:</span>
        <span>${{ cart.subtotal.toFixed(2) }}</span>
      </div>
      <div class="cart-summary-row">
        <span>Tax (13%):</span>
        <span>${{ cart.tax.toFixed(2) }}</span>
      </div>
      <div class="cart-summary-row cart-total">
        <strong>Total:</strong>
        <strong>${{ cart.total.toFixed(2) }}</strong>
      </div>
    </div>
    <button
      class="btn btn-primary btn-checkout"
      [disabled]="cart.items.length === 0"
      (click)="onCheckout.emit()"
    >
      Check Out
    </button>
  </div>
</div>
